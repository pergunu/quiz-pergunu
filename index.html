<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ujian Pergunu Situbondo</title>
  <link rel="icon" href="assets/images/logo.png" type="image/png"/>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins :wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css "/>
  <style>
    /* Gaya dasar disederhanakan untuk fokus pada logika */
    .category-tab {
      display: inline-block;
      margin-right: 10px;
      padding: 10px;
      background: #4361ee;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }

    .subcategory-label {
      display: none;
      margin: 5px;
      padding: 8px;
      background: #eee;
      border-radius: 5px;
    }
  </style>
</head>
<body>

<!-- Form Pendaftaran -->
<form id="participantForm">
  <div class="form-group">
    <label>Nama Lengkap</label>
    <input type="text" id="name" required />
  </div>
  <div class="form-group">
    <label>No HP</label>
    <input type="tel" id="phone" required />
  </div>

  <!-- Tab Kategori -->
  <div>
    <span class="category-tab" data-category="pelajar">Pelajar</span>
    <span class="category-tab" data-category="umum">Umum</span>
  </div>

  <!-- Subkategori Pelajar -->
  <div id="pelajarSubcategories">
    <label class="subcategory-label">IPA <input type="radio" name="subcategory" value="ipa"></label>
    <label class="subcategory-label">IPS <input type="radio" name="subcategory" value="ips"></label>
    <label class="subcategory-label">Matematika <input type="radio" name="subcategory"
            value="matematika"></label>
    <label class="subcategory-label">Agama <input type="radio" name="subcategory" value="agama"></label>
    <label class="subcategory-label">PPKN <input type="radio" name="subcategory" value="ppkn"></label>
    <label class="subcategory-label">Sejarah <input type="radio" name="subcategory" value="sejarah"></label>
    <label class="subcategory-label">Bahasa Indonesia <input type="radio" name="subcategory"
            value="bahasa_indonesia"></label>
    <label class="subcategory-label">Bahasa Inggris <input type="radio" name="subcategory"
            value="bahasa_inggris"></label>
  </div>

  <!-- Subkategori Umum -->
  <div id="umumSubcategories">
    <label class="subcategory-label">Logika <input type="radio" name="subcategory" value="logika"></label>
  </div>

  <button type="button" onclick="startQuiz()">Mulai Ujian</button>
</form>

<script>
// Variabel status kategori
let enabledCategories = {
  pelajar: true,
  umum: true,
  subcategories: {
    pelajar: {
      ipa: true,
      ips: true,
      matematika: true,
      agama: true,
      ppkn: true,
      sejarah: true,
      bahasa_indonesia: true,
      bahasa_inggris: true
    },
    umum: {
      logika: true
    }
  }
};

function saveEnabledCategories() {
  localStorage.setItem('enabledCategories', JSON.stringify(enabledCategories));
}

function loadEnabledCategories() {
  const saved = localStorage.getItem('enabledCategories');
  if (saved) {
    try {
      enabledCategories = JSON.parse(saved);
    } catch (e) {
      console.error("Gagal memuat data kategori");
    }
  }
}

function updateCategoryUI() {
  document.querySelectorAll('.category-tab').forEach(tab => {
    const category = tab.dataset.category;
    tab.style.display = enabledCategories[category] ? 'inline-block' : 'none';
  });

  // Pelajar
  document.querySelectorAll('#pelajarSubcategories .subcategory-label').forEach(label => {
    const radio = label.querySelector('input[type="radio"]');
    const subcategory = radio.value;
    label.style.display = enabledCategories.subcategories.pelajar[subcategory] ? 'block' : 'none';
  });

  // Umum
  document.querySelectorAll('#umumSubcategories .subcategory-label').forEach(label => {
    const radio = label.querySelector('input[type="radio"]');
    const subcategory = radio.value;
    label.style.display = enabledCategories.subcategories.umum[subcategory] ? 'block' : 'none';
  });
}

function startQuiz() {
  const activeTab = document.querySelector('.category-tab.active');
  const selectedRadio = document.querySelector('input[name="subcategory"]:checked');

  if (!activeTab || !selectedRadio) {
    alert("Silakan pilih kategori dan subkategori ujian.");
    return;
  }

  const currentCategory = activeTab.dataset.category;
  const currentSubcategory = selectedRadio.value;

  if (!enabledCategories[currentCategory]) {
    alert("Kategori ini sedang tidak tersedia!");
    return;
  }

  if (!enabledCategories.subcategories[currentCategory]?.[currentSubcategory]) {
    alert("Subkategori ini sedang tidak tersedia!");
    return;
  }

  alert("Selamat! Anda dapat mengikuti ujian.");
}
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  loadEnabledCategories();
  updateCategoryUI();

  // Tambahkan event click untuk tab kategori
  document.querySelectorAll('.category-tab').forEach(tab => {
    tab.addEventListener('click', function () {
      document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
    });
  });
});
</script>

</body>
</html>
