<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Hasil Ujian - PERGUNU SMART</title>

  <!-- Google Fonts & CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins :wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body onload="checkAuth()"> <!-- Memanggil fungsi dari auth.js -->

  <!-- Sertifikat -->
  <div class="certificate-wrapper">
    <div id="participantName">Nama Peserta</div>
    <div id="scoreDisplay">0%</div>
    <p id="resultsMessage">SEMPURNA! Anda sangat luar biasa...</p>
    <div id="watermarkCode">NamaPeserta/PELAJAR/SMA/IPA/.../PERGUNU-STB</div>
    <div id="certificateDate">Ditetapkan di : Situbondo, 09 Mei 2025</div>
  </div>

  <!-- Tombol -->
  <button id="printBtn" onclick="window.print()">Cetak Sertifikat</button>
  <a href="index.html" id="restartBtn">Ulangi Ujian</a>

  <!-- Audio -->
  <audio id="applauseSound" src="assets/audio/applause.mp3" preload="auto"></audio>

  <!-- Script Otentikasi -->
  <script src="js/auth.js"></script>

  <!-- Script Hasil Ujian -->
  <script>
    window.onload = function () {
      const currentUser = localStorage.getItem("currentUser");
      if (currentUser !== "peserta") {
        window.location.href = "login.html";
        return;
      }

      const participantData = JSON.parse(localStorage.getItem("participantData"));
      const quizResult = JSON.parse(localStorage.getItem("quizResult"));

      if (!participantData || !quizResult) {
        alert("Tidak ada data ujian. Silakan ikuti ujian terlebih dahulu.");
        window.location.href = "index.html";
        return;
      }

      // Tampilkan hasil ke UI
      document.getElementById("participantName").textContent = participantData.name.toUpperCase();
      document.getElementById("scoreDisplay").textContent = `${quizResult.scorePercentage}%`;
      document.getElementById("watermarkCode").textContent = quizResult.certificateCode;
      document.getElementById("certificateDate").textContent = `Ditetapkan di : Situbondo, ${new Date().toLocaleDateString("id-ID", { day: 'numeric', month: 'long', year: 'numeric' })}`;
    };
  </script>
</body>
</html>
